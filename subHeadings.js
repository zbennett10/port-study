var regions = [{"name":"Atlantic","id":"atlantic","topLevelPorts":["Azores - Port Delgada","Bermuda - Bermuda","Halifax - Nova Scotia"],"subHeadings":[{"id":"America","name":"America","parentId":"atlantic","ports":["Boston, MA","Annapolis, MD","Blount Island, FL","Boston, MA","Charleston, SC","Earle/Leanardo,NJ","Miami, FL","Morehead City, NC","New London/Groton, CT","New York, NY","Newport, RI","Norfolk, VA","Palm Beach, FL","Philadelphia, P","Port Canaveral, FL","Port Everglades, FL","Portland, ME","Portsmouth, NH","Southport, NC","Wilmington, NC"]}]},{"name":"Gulf of Mexico","id":"gulf_of_mexico","subHeadings":[{"id":"America","name":"America","parentId":"gulf_of_mexico","ports":["Gulfport, MS","Houston/Galveston, TX","Ingeside, TX","Key West, FL","Kings Bay, GA","Mayport, FL","Mobile, AL","New Orleans, LA","Panama City, FL","Pascagoula, MS","Pensacola, FL","Port Arthur, TX","Savannah, GA","Tampa, FL"]}]},{"name":"Caribbean","id":"caribbean","topLevelPorts":["Bermuda","Cartagena, Colombia","Antilles - Curacao","Cuba - Guantamo Bay","St. Martin"],"subHeadings":[{"id":"America","name":"America","parentId":"caribbean","ports":["Key West, FL","Miami, FL"]},{"id":"Jamaica","name":"Jamaica","parentId":"caribbean","ports":["Montego Bay","Ocho Rios"]},{"id":"Panama","name":"Panama","parentId":"caribbean","ports":["Balboa","Colon"]},{"id":"PuertoRico","name":"Puerto Rico","parentId":"caribbean","ports":["Ponce","Roosevelt Roads"]},{"id":"VirginIslands","name":"Virgin Islands","parentId":"caribbean","ports":["St. Thomas, US","Tortola, British"]}]},{"name":"South America","id":"sa","topLevelPorts":["Curacao, Antilles","Rio de Janiero, Brazil","Cartagena, Colombia","Acajutla, El Salvador","Puerto Quetzal, Guatemala"],"subHeadings":[{"id":"Chile","name":"Chile","parentId":"sa","ports":["Punta Arenas","Strait of Magellan","Valparaiso"]}]},{"name":"Pacific","id":"pacific","topLevelPorts":["Diego Garcia","Apra Harbor, Guam","Hong Kong","Noumea, New Caledonia","Aukland, New Zealand","Palau","Saipan Tinian","American Samoa","Colombo, Sri Lanka"],"subHeadings":[{"id":"America","name":"America","parentId":"pacific","ports":["Honolulu Harbor, HI","Pearl Harbor, HI","Puget Sound, WA"]},{"id":"Australia","name":"Australia","parentId":"pacific","ports":["Brisbane","Bunbury","Cairns","Darwin","Fremantle","Geraldton","Mackay","\n          ","Townsville"]},{"id":"Fiji","name":"Fiji","parentId":"pacific","ports":["Lautoka","Suva"]},{"id":"Indonesia","name":"Indonesia","parentId":"pacific","ports":["Jakarta","Surabaya"]},{"id":"Japan","name":"Japan","parentId":"pacific","ports":["Buckner Bay, Okinawa","Hachinohe","Hakodate","Iwakuni","Kagoshima","Kure","Maizuru","Muroran","Naha","Numazu","Ominato","Otaru","Sasebo","Tomakomai","Yokohama","Yokosuka"]},{"id":"Korea","name":"Korea","parentId":"pacific","ports":["Chinhae","Donghae","Gwangyang","Inchon","Jeju Do","Mokpo","Pohang","Pusan","Pyongtaek"]},{"id":"Mexico","name":"Mexico","parentId":"pacific","ports":["Acapulco","Cabo San Lucas","La Paz","Mazatlan","Pichelingue","Puerta Vallarta"]},{"id":"Panama","name":"Panama","parentId":"pacific","ports":["Balboa","Colon"]},{"id":"Philippines","name":"Philippines","parentId":"pacific","ports":["Cebu","Manila","Puerto Princesa","Subic Bay"]},{"id":"Taiwan","name":"Taiwan","parentId":"pacific","ports":["Chilung","Kaohsiung"]},{"id":"Thailand","name":"Thailand","parentId":"pacific","ports":["Laem Chabang","Pattaya","Phuket","Sattahip"]}]},{"name":"Europe & Mediterranean","id":"euromed","topLevelPorts":["Dures, Albania","Varna, Bulgaria","Tallinn, Estonia","Batumi, Georgia","Kiel, Germany","Gibralter","Reykjavik, Iceland","Cobb, Ireland","Klaipeda, Lithuania","Valletta, Malta ","Gdynia, Poland ","Constanta, Romania ","Koper, Slovenia ","Gothenburg, Sweden "],"subHeadings":[{"id":"Croatia","name":"Croatia","parentId":"euromed","ports":["Dubrovnik","Split","Zadar"]},{"id":"Cyprus","name":"Cyprus","parentId":"euromed","ports":["Larnaca","Limassol"]},{"id":"Egypt","name":"Egypt","parentId":"euromed","ports":["Alexandria","Port Said"]},{"id":"France","name":"France","parentId":"euromed","ports":["Brest","Cannes","Marseilles","Monaco","Nice","Toulon","Villefranch"]},{"id":"Greece","name":"Greece","parentId":"euromed","ports":["Astakos","Kalamate","Marseilles","Kerkira","Kithira","Piraeus","Rhodes","Souda Bay","St. Theodore","Thessaloniki"]},{"id":"Israel","name":"Israel","parentId":"euromed","ports":["Ashdod","Eilat","Haifa"]},{"id":"Italy","name":"Italy","parentId":"euromed","ports":["Augusta Bay","Cagliari","Catania","Civitavecchia","Gaeta","Genoa","La Maddalena","La Spezia","Livorno","Messina","Naples","Palerno","Porto Torres","San Remo","Taormina","Taranto","Trieste","Venice"]},{"id":"Morocco","name":"Morocco","parentId":"euromed","ports":["Casa Blanca","Tangier"]},{"id":"Norway","name":"Norway","parentId":"euromed","ports":["Bergen","Hakonsvern","Olavsvern","Tromso"]},{"id":"Portugal","name":"Portugal","parentId":"euromed","ports":["Lisbon","Funchal"]},{"id":"Spain","name":"Spain","parentId":"euromed","ports":["Barcelona","Benidorm","Cartagena","Ferrol","Ibeza","Malaga","Palma","Pollensa","Rota","Valencia"]},{"id":"Tunisia","name":"Tunisia","parentId":"euromed","ports":["Bizerte","Sfax","Sousse","Tunis"]},{"id":"Turkey","name":"Turkey","parentId":"euromed","ports":["Aksaz","Antalya","Istanbul","Izmir","Iskenderun","Kusadasi","Mamaris","Mersin"]},{"id":"UnitedKingdom","name":"United Kingdom","parentId":"euromed","ports":["Faslane","Firth of Forth","Greenock","Milford Haven","Torquay/Tor Bay"]}]},{"name":"Africa","id":"africa","topLevelPorts":["Mindelo, Cape Verde","Port Gentil, Gaboon","Mombasa, Kenya","Port Luis, Mauritius","Sao Tome, Sao Tome and Principe","Victoria, Seychelles","DarEsSalaam, Tanzania","Lome, Togo"],"subHeadings":[{"id":"Cameroon","name":"Cameroon","parentId":"africa","ports":["Douala","Limbe"]},{"id":"Egypt","name":"Egypt","parentId":"africa","ports":["Alexandria","Port Said"]},{"id":"Morocco","name":"Morocco","parentId":"africa","ports":["Casablanca","Tangier"]},{"id":"SouthAfrica","name":"South Africa","parentId":"africa","ports":["Cape Town","Port Eizebeth & Ngqura"]},{"id":"Tunisia","name":"Tunisia","parentId":"africa","ports":["Bizerte","Sfax","Sousse","Tunis"]}]},{"name":"Middle East","id":"middle_east","topLevelPorts":["Aqaba, Jordan","Pakistan, Karachi","Jeddah, Saudi Arabia","Victoria, Seychelles"],"subHeadings":[{"id":"Bahrain","name":"Bahrain","parentId":"middle_east","ports":["Khalifa Bin Salman","Mina Salman","Sitra"]},{"id":"Cyprus","name":"Cyprus","parentId":"middle_east","ports":["Larnaca","Limassol"]},{"id":"Egypt","name":"Egypt","parentId":"middle_east","ports":["Alexandria","Port Said"]},{"id":"Israel","name":"Israel","parentId":"middle_east","ports":["Ashdod","Eilat","Haifa"]},{"id":"Oman","name":"Oman","parentId":"middle_east","ports":["Duqm","Muscat","Salalah"]},{"id":"Qatar","name":"Qatar","parentId":"middle_east","ports":["Doha","Messaieedt","Ras Laffan"]},{"id":"Turkey","name":"Turkey","parentId":"middle_east","ports":["Aksaz","Antalya","Istanbul","Izmir","Iskenderun","Kusadasi","Mamaris","Mersin"]},{"id":"UnitedArabEmirates","name":"United Arab Emirates","parentId":"middle_east","ports":["Fujairh","JabelAli"]}]},{"name":"Indian Ocean","id":"io","topLevelPorts":["Colombo, Sri Lanka","Diego Garcia","Male, Maldives","Port Luis, Mauritius","Victoria, Seychelles"]},{"name":"General Information","id":"general_info","topLevelPorts":["Wind Chill Table","Heat Index Table","Coastal Tsunamis"]}];

var subHeadingPorts = regions.reduce((p,c) => {
    if(c.subHeadings && (c.id === "sa" || c.id === "atlantic" || c.id === "gulf_of_mexico")) {
        var regionTitle = c.name;
        var regionName = c.id;
        if(regionName === 'gulf_of_mexico') regionName = 'gulf-of-mexico';
        if(regionName === 'sa') regionName = 'south-america';

        var ports = c.subHeadings.reduce((pp,cc) => {
            if(cc.ports) {
                var subRegionTitle = regionTitle + " - " + cc.name;
                var subRegionName = cc.id.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase(); //add dash between upper/lowercase letters
                var subHeadingPorts = cc.ports.map(portName => {
                    return {
                        parentRegionTitle: subRegionTitle,
                        parentRegionName: subRegionName,
                        portName: portName
                    }
                });
                return pp.concat(subHeadingPorts);
            } else {
                return pp;
            }
        }, []);

        return p.concat(ports);
    } else {
        return p;
    }
}, []);

console.log(JSON.stringify(subHeadingPorts));